{% extends 'base.html' %}

{% block content %}
    <h1>Fetch Books from Google Books API</h1>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <form method="POST">
        {% csrf_token %}
        <input type="text" name="query" placeholder="Search for a book">
        <button type="submit">Search</button>
    </form>
    
    {% if books %}
        <h2>Search Results:</h2>
        <ul>
            {% for book in books %}
                <li>
                    <strong>{{ book.volumeInfo.title }}</strong> by 
                    {% if book.volumeInfo.authors %}
                        {{ book.volumeInfo.authors|join:", " }}
                    {% else %}
                        Unknown Author
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% endif %}
{% endblock %}